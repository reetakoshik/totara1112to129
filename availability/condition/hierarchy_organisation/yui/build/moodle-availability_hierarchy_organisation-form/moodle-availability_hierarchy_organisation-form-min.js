YUI.add("moodle-availability_hierarchy_organisation-form",function(e,t){M.availability_hierarchy_organisation=M.availability_hierarchy_organisation||{},M.availability_hierarchy_organisation.form=e.Object(M.core_availability.plugin),M.availability_hierarchy_organisation.form.initInner=function(e){this.conditionConfig=e},M.availability_hierarchy_organisation.form.generateIndex=function(){var e=0;return function(){return e++}}(),M.availability_hierarchy_organisation.form.getNode=function(t){var n=M.availability_hierarchy_organisation.form.generateIndex(),r="org["+n+"]",i="orgid["+n+"]",s=t.organisation===undefined?0:t.organisation,o='<label class="form-group" for="avail-organisation"><span class="p-r-1">'+M.util.get_string("title","availability_hierarchy_organisation")+"</span> ";o+='<span class="availability-group">',o+="</label>",o+='<select id="avail-organisation" name="'+r+'">',s>0&&typeof this.conditionConfig!="undefined"&&(o+="<option value="+s+">"+this.conditionConfig.organisationNames[s].fullname+"</option>"),o+="</select>",o+='<input type="hidden" name="'+i+'" value="'+s+'" />',o+="</span>";var u=e.Node.create('<span class="form-inline">'+o+"</span>");return require(["core/form-autocomplete","jquery"],function(e,t){var n='[name="'+r+'"]',s='[name="'+i+'"]';e.enhance(n,!1,"availability_hierarchy_organisation/ajax_handler",M.util.get_string("searchorganisations","availability_hierarchy_organisation")),t(n).on("change",function(e){t(s).val(t(n).val()),M.core_availability.form.update()})}),u},M.availability_hierarchy_organisation.form.fillValue=function(e,t){e.organisation=t.one("[name^=orgid]").getAttribute("value")},M.availability_hierarchy_organisation.form.fillErrors=function(e,t){var n={};this.fillValue(n,t),n.organisation.trim()==="0"&&e.push("availability_hierarchy_organisation:error_selectfield")}},"@VERSION@",{requires:["base","node","event","moodle-core_availability-form"]});
