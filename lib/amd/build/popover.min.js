define(["jquery","theme_roots/bootstrap"],function(a){function b(){function b(b){for(var d=0;d<c.length;d++){var e=c[d],f=a(e.parentNode),g=a(".popover");f.is(b.target)||0!==f.has(b.target).length||0!==g.has(b.target).length||f.popover("hide").data("bs.popover")}}a('[data-component="/core/output/popover"][data-enhanced="false"]').each(function(){var b=this,c=a(this),d=c.parent(),e=this.getAttribute("data-arrow_placement")?this.getAttribute("data-arrow_placement"):"bottom",f=this.getAttribute("data-trigger")?this.getAttribute("data-trigger"):"focus";if("smartPosition"===e){var g=!1;e=function(a,c){var d=c.getBoundingClientRect(),e=b.getAttribute("data-placement_max_height")?b.getAttribute("data-placement_max_height"):300,f=b.getAttribute("data-placement_max_width")?b.getAttribute("data-placement_max_width"):300;return e+=10,f+=10,window.innerHeight-d.bottom>e?(g=!0,"bottom"):d.top>e?(g=!1,"top"):d.left>f?"left":window.innerWidth-d.right>f?"right":(g=!1,"top")},window.innerWidth<992&&d.on("shown.bs.popover",function(){b.parentNode.scrollIntoView(g)})}d.popover({title:c.data("title")?c.data("title"):"",content:a(".popover__content",this).html(),placement:e,trigger:f,html:!0}),"manual"===f?(b.parentNode.addEventListener("core/popover:show",function(){d.popover("show")}),b.parentNode.addEventListener("core/popover:hide",function(){d.popover("hide")})):d.attr("tabindex",0).css("cursor","pointer"),c.attr("data-enhanced","true")});var c=document.querySelectorAll('[data-component="/core/output/popover"][data-close_on_focus_out]');c&&(document.removeEventListener("click",b,!1),document.removeEventListener("touchstart",b,!1),document.addEventListener("click",b,!1),document.addEventListener("touchstart",b,!1))}return{scan:b}});