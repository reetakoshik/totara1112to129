!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.ES6Promise=b()}(this,function(){"use strict";function a(a){var b=typeof a;return null!==a&&("object"===b||"function"===b)}function b(a){return"function"==typeof a}function c(a){R=a}function d(a){S=a}function e(){return function(){return process.nextTick(j)}}function f(){return"undefined"!=typeof Q?function(){Q(j)}:i()}function g(){var a=0,b=new V(j),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function h(){var a=new MessageChannel;return a.port1.onmessage=j,function(){return a.port2.postMessage(0)}}function i(){var a=setTimeout;return function(){return a(j,1)}}function j(){for(var a=0;a<P;a+=2){var b=Y[a],c=Y[a+1];b(c),Y[a]=void 0,Y[a+1]=void 0}P=0}function k(){try{var a=Function("return this")().require("vertx");return Q=a.runOnLoop||a.runOnContext,f()}catch(b){return i()}}function l(a,b){var c=this,d=new this.constructor(n);void 0===d[$]&&F(d);var e=c._state;if(e){var f=arguments[e-1];S(function(){return C(e,d,f,c._result)})}else z(c,d,a,b);return d}function m(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(n);return v(c,a),c}function n(){}function o(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function q(a){try{return a.then}catch(b){return ca.error=b,ca}}function r(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function s(a,b,c){S(function(a){var d=!1,e=r(c,b,function(c){d||(d=!0,b!==c?v(a,c):x(a,c))},function(b){d||(d=!0,y(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,y(a,e))},a)}function t(a,b){b._state===aa?x(a,b._result):b._state===ba?y(a,b._result):z(b,void 0,function(b){return v(a,b)},function(b){return y(a,b)})}function u(a,c,d){c.constructor===a.constructor&&d===l&&c.constructor.resolve===m?t(a,c):d===ca?(y(a,ca.error),ca.error=null):void 0===d?x(a,c):b(d)?s(a,c,d):x(a,c)}function v(b,c){b===c?y(b,o()):a(c)?u(b,c,q(c)):x(b,c)}function w(a){a._onerror&&a._onerror(a._result),A(a)}function x(a,b){a._state===_&&(a._result=b,a._state=aa,0!==a._subscribers.length&&S(A,a))}function y(a,b){a._state===_&&(a._state=ba,a._result=b,S(w,a))}function z(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+aa]=c,e[f+ba]=d,0===f&&a._state&&S(A,a)}function A(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a._subscribers.length=0}}function B(a,b){try{return a(b)}catch(c){return ca.error=c,ca}}function C(a,c,d,e){var f=b(d),g=void 0,h=void 0,i=void 0,j=void 0;if(f){if(g=B(d,e),g===ca?(j=!0,h=g.error,g.error=null):i=!0,c===g)return void y(c,p())}else g=e,i=!0;c._state!==_||(f&&i?v(c,g):j?y(c,h):a===aa?x(c,g):a===ba&&y(c,g))}function D(a,b){try{b(function(b){v(a,b)},function(b){y(a,b)})}catch(c){y(a,c)}}function E(){return da++}function F(a){a[$]=da++,a._state=void 0,a._result=void 0,a._subscribers=[]}function G(){return new Error("Array Methods must be provided an Array")}function H(a){return new ea(this,a).promise}function I(a){var b=this;return new b(O(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})}function J(a){var b=this,c=new b(n);return y(c,a),c}function K(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function L(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function M(){var a=void 0;if("undefined"!=typeof global)a=global;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(b){throw new Error("polyfill failed because global object is unavailable in this environment")}var c=a.Promise;if(c){var d=null;try{d=Object.prototype.toString.call(c.resolve())}catch(b){}if("[object Promise]"===d&&!c.cast)return}a.Promise=fa}var N=void 0;N=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var O=N,P=0,Q=void 0,R=void 0,S=function(a,b){Y[P]=a,Y[P+1]=b,P+=2,2===P&&(R?R(j):Z())},T="undefined"!=typeof window?window:void 0,U=T||{},V=U.MutationObserver||U.WebKitMutationObserver,W="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),X="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Y=new Array(1e3),Z=void 0;Z=W?e():V?g():X?h():void 0===T&&"function"==typeof require?k():i();var $=Math.random().toString(36).substring(2),_=void 0,aa=1,ba=2,ca={error:null},da=0,ea=function(){function a(a,b){this._instanceConstructor=a,this.promise=new a(n),this.promise[$]||F(this.promise),O(b)?(this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(b),0===this._remaining&&x(this.promise,this._result))):y(this.promise,G())}return a.prototype._enumerate=function(a){for(var b=0;this._state===_&&b<a.length;b++)this._eachEntry(a[b],b)},a.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===m){var e=q(a);if(e===l&&a._state!==_)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===fa){var f=new c(n);u(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},a.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===_&&(this._remaining--,a===ba?y(d,c):this._result[b]=c),0===this._remaining&&x(d,this._result)},a.prototype._willSettleAt=function(a,b){var c=this;z(a,void 0,function(a){return c._settledAt(aa,b,a)},function(a){return c._settledAt(ba,b,a)})},a}(),fa=function(){function a(b){this[$]=E(),this._result=this._state=void 0,this._subscribers=[],n!==b&&("function"!=typeof b&&K(),this instanceof a?D(this,b):L())}return a.prototype["catch"]=function(a){return this.then(null,a)},a.prototype["finally"]=function(a){var b=this,c=b.constructor;return b.then(function(b){return c.resolve(a()).then(function(){return b})},function(b){return c.resolve(a()).then(function(){throw b})})},a}();return fa.prototype.then=l,fa.all=H,fa.race=I,fa.resolve=m,fa.reject=J,fa._setScheduler=c,fa._setAsap=d,fa._asap=S,fa.polyfill=M,fa.Promise=fa,fa.polyfill(),fa});