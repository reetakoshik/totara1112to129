define(["jquery","core/templates","core/notification","core/custom_interaction_events","message_popup/notification_repository","message_popup/notification_area_events","core/str"],function(a,b,c,d,e,f,g){var h={CONTAINER:'[data-region="notification-area"]',CONTENT:'[data-region="content"]',HEADER:'[data-region="header"]',FOOTER:'[data-region="footer"]',TOGGLE_MODE:'[data-action="toggle-mode"]'},i={HEADER:"message_popup/notification_area_content_area_header",CONTENT:"message_popup/notification_area_content_area_content",FOOTER:"message_popup/notification_area_content_area_footer"},j=function(b,c){this.root=a(b),this.container=this.root.closest(h.CONTAINER),this.userId=c,this.header=this.root.find(h.HEADER),this.content=this.root.find(h.CONTENT),this.footer=this.root.find(h.FOOTER),this.registerEventListeners()};return j.prototype.getRoot=function(){return this.root},j.prototype.getContainer=function(){return this.container},j.prototype.getUserId=function(){return this.userId},j.prototype.getHeader=function(){return this.header},j.prototype.getContent=function(){return this.content},j.prototype.getFooter=function(){return this.footer},j.prototype.show=function(){this.getContainer().addClass("show-content-area")},j.prototype.hide=function(){this.getContainer().removeClass("show-content-area")},j.prototype.setHeaderHTML=function(a){this.getHeader().empty().html(a)},j.prototype.setContentHTML=function(a){this.getContent().empty().html(a)},j.prototype.setFooterHTML=function(a){this.getFooter().empty().html(a)},j.prototype.showNotification=function(c){var d=a.Deferred();return c.contexturlname?d=g.get_string("viewnotificationresource","message",c.contexturlname):d.resolve(""),d.then(function(d){""!==d&&(c.str_viewnotificationresource=d);var e=b.render(i.HEADER,c).done(function(a){this.setHeaderHTML(a)}.bind(this)),g=b.render(i.CONTENT,c).done(function(a){this.setContentHTML(a)}.bind(this)),h=b.render(i.FOOTER,c).done(function(a){this.setFooterHTML(a)}.bind(this));return a.when(e,g,h).done(function(){this.show(),this.getContainer().trigger(f.notificationShown,[c])}.bind(this))}.bind(this))},j.prototype.registerEventListeners=function(){d.define(this.getRoot(),[d.events.activate]),this.getRoot().on(d.events.activate,h.VIEW_TOGGLE,function(){this.hide()}.bind(this)),this.getContainer().on(f.showNotification,function(a,b){this.showNotification(b)}.bind(this))},j});