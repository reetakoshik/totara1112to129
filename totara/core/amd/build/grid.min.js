define([],function(){function a(){return this instanceof a?(this.activeClass="tw-grid__item_active",void(this.widget="")):new a}a.prototype={constructor:a,events:function(){var a=this;this.widget.addEventListener("click",function(b){if(b.target&&b.target.closest("[data-tw-grid-item-toggle]")){b.preventDefault();var c=b.target.closest("[data-tw-grid-item]"),d=c.classList.contains(a.activeClass);if(a.unsetActive(),d)return void a.triggerEvent("remove",{});a.setActive(c)}})},setParent:function(a){this.widget=a},setActive:function(a){var b=a.getAttribute("data-tw-grid-item-ID");a.setAttribute("data-tw-grid-item-active",""),a.classList.add(this.activeClass),this.setVisibleView(),this.triggerEvent("add",{key:"id",val:b})},setVisibleView:function(){var a=this.widget.querySelector("[data-tw-grid-item-active]");a&&a.scrollIntoView(!1)},triggerEvent:function(a,b){var c=new CustomEvent("totara_core/grid:"+a,{bubbles:!0,detail:b});this.widget.dispatchEvent(c)},unsetActive:function(){for(var a,b=this.widget.querySelectorAll("[data-tw-grid-item-active]"),c=0;c<b.length;c++)a=b[c],a.removeAttribute("data-tw-grid-item-active"),a.classList.remove(this.activeClass)}};var b=function(b){return new Promise(function(c){var d=new a;d.setParent(b),d.events(),c(d)})};return{init:b}});