//
// This file is part of Totara LMS
//
// Copyright (C) 2016 onwards Totara Learning Solutions LTD
//
// This program is free software; you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation; either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//
// @copyright 2016 onwards Totara Learning Solutions LTD
// @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
// @author    Rob Tyler <rob.tyler@totaralearning.com>
// @package   totara_program

// These variables are only here to enable LESS to compile.
// The values will be overridden by those values defined in core.
@padding-small-horizontal: 10px;
@padding-large-horizontal: 16px;
@padding-small-vertical: 5px;
@padding-large-vertical: 10px;
@legend-border-color: #e5e5e5;
@border-radius-large: 6px;
@gray-base: #000;
@gray-light: lighten(@gray-base, 46.7%); // #777
@gray-lighter: lighten(@gray-base, 93.5%); // #eee
@line-height-computed: 0;


/*****************************************************************************/
/** View Program (including when viewing via catalog, as required learning,
 *  or as part of a learning plan) **/
/*****************************************************************************/
.timeallowed {
    font-weight: bold;
}

/** Grey boxes containing program details (shown when viewing a program) **/
.programprogress {
    margin-bottom: 5px;
}
.programprogress .item {
    padding-top: 10px;
    text-align: left;
    width: 33%;
    margin-right: 5px;
    display: inline-block;
    vertical-align: top;

    .progressbar_container {
        width: 80%;
    }
}
.dir-rtl .programprogress .item {
    margin-right: 0px;
    margin-left: 5px;
}
.programprogress .plan_highlight {
    display: block;
}
#extrequestlink {
    display: block;
}

/** These styles are applied on the 'view' pages **/
.nextsetoperator .operator-and,
.nextsetoperator .operator-or,
.nextsetoperator .operator-then {
    font-size: 36px;
    font-weight: bold;
    text-transform: uppercase;
    line-height: 1.4;
    width: auto;
    display: inline-block;
    height: 53px;
    padding-right: 80px;
}
.dir-rtl .nextsetoperator .operator-and,
.dir-rtl .nextsetoperator .operator-or,
.dir-rtl .nextsetoperator .operator-then {
    padding-right: 0px;
    padding-left: 80px;
}

/** Help text that appears below OR/THEN **/
.nextsetoperator .nextsethelp {
    color: #777777;
    clear: both;
    width: auto;
}


/** These styles are applied on the 'edit' page **/
.nextsetoperator-and,
.nextsetoperator-or,
.nextsetoperator-then {
    width: 100px;
    height: 53px;
    padding-right: 44px;
}
.dir-rtl .nextsetoperator-and,
.dir-rtl .nextsetoperator-or,
.dir-rtl .nextsetoperator-then {
    padding-right: 0px;
    padding-left: 44px;
}
.nextsetoperator-and select,
.nextsetoperator-or select,
.nextsetoperator-then select {
    margin: 15px 0px;
}
div.nextsetoperator-group-and {
    border: 1px solid black;
    padding: 15px;
    -webkit-border-radius: 5px;
    border-radius: 5px;
}


/** These are applied on both 'view' and 'edit' pages **/
.nextsetoperator {
    padding-bottom: 20px;
}

.nextsetoperator-and,
.nextsetoperator-or,
.nextsetoperator .operator-or {
    background:url([[pix:totara_program|progress_or]]) no-repeat right center;
}
.nextsetoperator-then,
.nextsetoperator .operator-then {
    background:url([[pix:totara_program|progress_then]]) no-repeat right center;
}
.dir-rtl .nextsetoperator-and,
.dir-rtl .nextsetoperator .operator-and,
.dir-rtl .nextsetoperator-or,
.dir-rtl .nextsetoperator .operator-or,
.dir-rtl .nextsetoperator-then,
.dir-rtl .nextsetoperator .operator-then {
    background-position: left center;
}

/**
 * Other styles applied when viewing the program (but not when editing)
 */

.display-program table .status {
    width: 95px;
}
.display-program table .launchcourse {
    width: 55px;
}

.display-program {
    padding: 0 10px;
    border: 1px solid #000000;
    border-radius: 5px;
}

/*****************************************************************************/
/** Program Content **/
/*****************************************************************************/

/**
 * Indent list of courses so course names line up rather than and/or operator
 */
#edit-program-content fieldset.course_set .course_table .operator {
    width: 30px;
}
#edit-program-content fieldset.course_set .course_table {
    position: relative;
}

.dir-ltr #edit-program-content fieldset.course_set .course_table {
    left: -48px;
}
.dir-rtl #edit-program-content fieldset.course_set .course_table {
    right: -48px;
}

/**
 * Restrict cell containing totara-item-group divs to limit their width
 * on this page.
 */
#edit-program-content fieldset.course_set .course_table td.course {
    width: 300px;
}

/**
 * Remove any table stripping
 */
#edit-program-content fieldset.course_set .course_table tr {
    background: transparent;
}

/**
 * Display up/down/delete buttons for coursesets/messages.
 * Make to look like links with icons.
 */
.path-totara-program fieldset .setbuttons,
.path-totara-program fieldset .messagebuttons {
    width: 100%;
    margin-top: -10px;
}

.dir-ltr.path-totara-program fieldset .setbuttons,
.dir-ltr.path-totara-program fieldset .messagebuttons {
    text-align: right;
}

.dir-rtl.path-totara-program fieldset .setbuttons,
.dir-rtl.path-totara-program fieldset .messagebuttons {
    text-align: left;
}

.dir-ltr.path-totara-program fieldset .setbuttons input,
.dir-ltr.path-totara-program fieldset .messagebuttons input {
    padding-right: 17px;
    background-position: right center;
    background-repeat: no-repeat;
}

.dir-rtl.path-totara-program fieldset .setbuttons input,
.dir-rtl.path-totara-program fieldset .messagebuttons input {
    padding-left: 17px;
    background-position: left center;
    background-repeat: no-repeat;
}

.path-totara-program fieldset .setbuttons input.moveup,
.path-totara-program fieldset .messagebuttons input.moveup {
    background-image: url([[pix:t/up]]);
}

.path-totara-program fieldset .setbuttons input.movedown,
.path-totara-program fieldset .messagebuttons input.movedown {
    background-image: url([[pix:t/down]]);
}

.path-totara-program fieldset .setbuttons input.delete,
.path-totara-program fieldset .messagebuttons input.delete {
    background-image: url([[pix:t/delete]]);
}

.path-totara-program fieldset .setbuttons input.movedown[disabled],
.path-totara-program fieldset .messagebuttons input.movedown[disabled] {
    background-image: url([[pix:t/disable_down]]);
    color: #bdbdc8;
}

.path-totara-program fieldset .setbuttons input.moveup[disabled],
.path-totara-program fieldset .messagebuttons input.moveup[disabled] {
    background-image: url([[pix:t/disable_up]]);
    color: #bdbdc8;
}

/**
 * Fix the layout in the 'Set completion' dialog box on 'Content' tab.
 */
#prog-completion-or-string {
    clear: both;
    padding: 15px 5px;
}

#prog-completion-fixed-date,
#prog-completion-relative-date {
    display: inline-block;

    label {
        display: inline-block;
        width: 100px;
    }

    select,
    input {
        display: inline-block;
    }
}

.dir-rtl #completion-dialog select {
    float: none;
}

/*****************************************************************************/
/** Program Assignments **/
/*****************************************************************************/

/**
 * Styling the assignment tables
 */
#assignment_categories .assignment_category td.col0,
#assignment_categories .assignment_category th.col0 {
    width: 180px;
}


#assignment_categories .assignment_category td.col1,
#assignment_categories .assignment_category th.col1 {
    text-align: center;
    width: 60px;
}

#assignment_categories .assignment_category td.col2,
#assignment_categories .assignment_category th.col2 {
    width: 170px;
}

#assignment_categories .assignment_category td.col3,
#assignment_categories .assignment_category th.col3 {
    width: 80px;
}

#assignment_categories .assignment_category.individuals td.col3,
#assignment_categories .assignment_category.individuals th.col3 {
    width: 150px;
}

#assignment_categories .assignment_category td.col4,
#assignment_categories .assignment_category th.col4 {
    width: 60px;
}

#assignment_categories .assignment_category td,
#assignment_categories .assignment_category th {
    padding: 0px 6px;
}

#assignment_categories .assignment_category th {
    padding-bottom: 9px;
}

#assignment_categories .assignment_category tr {
    margin-bottom: 5px;
}

#assignment_categories .assignment_category td,
#assignment_categories .assignment_category th {
    border-left: 1px solid #2e2e2e;
}
.dir-ltr #assignment_categories .assignment_category td:first-child,
.dir-ltr #assignment_categories .assignment_category th:first-child {
    border-left: 0px solid;
}

.dir-rtl #assignment_categories .assignment_category td:last-child,
.dir-rtl #assignment_categories .assignment_category th:last-child {
    border-left: 0px solid;
}

/*
 * Assignment count totals displayed on Assignments tab.
 */
.path-totara-program.dir-ltr .total_user_count {
    text-align: right;
    padding-right: 6px;
    padding-left: 0px;
}

.path-totara-program.dir-rtl .total_user_count {
    text-align: left;
    padding-left: 6px;
    padding-right: 0px;
}

.path-totara-program.dir-ltr .overall_total {
    padding: 6px;
    text-align: right;
}

.path-totara-program.dir-rtl .overall_total {
    padding: 6px;
    text-align: left;
}

/**
 * Add a little space between assignment types.
 */
#assignment_categories .assignment_category {
    margin: 15px 0;
}


/**
 * NEW PROGRAM ASSIGNMENTS
 */
.totara_program__assignments {
    width: 100%;
    clear: both;

    &-search {
        float: right;
    }

    &-add {
        float: left;
        margin: 10px 0;
    }

    &__toolbar:after,
    &__toolbar:before {
        content: " ";
        display: block;
        height: 0;
        border-bottom: 1px solid @totara_style-color_neutral_5;
        clear: both;
    }

    &__content {
        clear: both;
        display: flex;
        margin-top: @totara_style-spacing_medium;
    }

    &__filters {
        flex: 0 1 200px;
    }

    &__loading {
        opacity: 0.5;
    }

    &__results {
        flex: 1 2 auto;

        &__table {
            width: 100%;

            thead tr {
                border-bottom: 1px solid @totara_style-color_neutral_5;
            }

            tr {
                border-bottom: 1px solid @totara_style-color_neutral_3;
            }

            &__row-type {
                font-size: smaller;
                display: block;
            }

            tr:nth-child(even) {
                background-color: @totara_style-color_neutral_2;
            }

            label {
                font-weight: normal;
            }
        }

        &-too-many,
        &-no-results {
            text-align: center;
            color: @brand-info;

            .flex-icon {
                font-size: @font-size-h3;
                vertical-align: 0;
            }

            h3 {
                display: inline-block;
            }
        }
    }

}


/*****************************************************************************/
/** Program Exceptions **/
/*****************************************************************************/

/**
 * Styles for action toolbar.
 */
#program-exceptions .exceptionactions div {
    float: left;
    padding-right: 5px;
    padding-left: 0px;
}

.dir-rtl #program-exceptions .exceptionactions div {
    float: right;
    padding-right: 0px;
    padding-left: 5px;
}

#program-exceptions .exceptionactions {
    float: none;
    height: 35px;
    margin-top: 10px;
    padding-top: 10px;
    margin-bottom: 15px;
    background-color: #f0f0f0;
}

#program-exceptions .exceptionactions input#applyactionbutton {
    margin: 0px 5px;
}

#program-exceptions .exceptionactions p {
    margin-top: 5px;
    margin-bottom: 5px;
}
.course_list {
    list-style-type: none;
    margin: 0;
}
@media screen and (min-width: 1200px) {
    /* ul needed here as otherwise this affects the course listing block */
    ul.course_list {
        margin: 0 0 0 -5%;
    }
}
.course_list li {
    width: 100%;
    clear: left;
}
.course_list .operator {
    float: left;
    width: 5%;
    display: inline-block;
    padding: 10px 0;
}
.course_list .totara-item-group {
    width: 90%;
    float: left;
}
.course_list li .notifyproblem {
    clear: left;
    width: 87%;
    margin: 0 0 0 5%;
}
@media screen and (max-width: 512px) {
    .course_list li .notifyproblem {
        margin: 0;
        width: 85%;
    }
}

#category_select label {
    display: inline;
}


#page-admin-totara-program-manage .buttons {
    text-align: left;
    margin-left: 0;
    padding-left: 0;
    width: 100%;
}

#page-admin-totara-program-manage .buttons .singlebutton {
    display: inline-block;
    padding: 0;
    margin: 0 @padding-small-horizontal 0 0;
}

#page-admin-totara-program-manage .buttons .singlebutton div {
    margin-left: 0;
}

#page-admin-totara-program-manage .buttons .singlebutton input {
    margin-left: 0;
}

#page-admin-totara-program-manage .categorypicker {
    margin-bottom: @padding-large-vertical;
}

#page-admin-totara-program-manage .categorypicker label {
    margin-right: @padding-small-horizontal;
}

#page-admin-totara-program-manage #coursesearch label {
    margin-right: @padding-small-horizontal;
}

// This selector is to ensure the changes are limited
// to the programs and certifications section of Totara.
.path-totara-program {

    #addtoselect {
        vertical-align: middle;
    }

    #addtoselect select,
    #addtoselect label,
    #addtoselect span,
    #addtoselect input,
    #category_select select,
    #category_select label,
    #category_select span,
    #category_select input,
    #exceptionssearchform label,
    #exceptionssearchform input {
        display: inline-block;
        vertical-align: middle;
        margin: 0 @padding-small-horizontal 0 0;
    }

    #mform1,
    .assignments form {
        margin-bottom: @padding-large-vertical;
    }

    fieldset .setbuttons input.moveup,
    fieldset .setbuttons input.movedown,
    fieldset .setbuttons input.delete,
    fieldset .messagebuttons input.moveup,
    fieldset .messagebuttons input.movedown,
    fieldset .messagebuttons input.delete {
        padding-right: @padding-large-horizontal * 2;
        background-position: 85% 50%;
    }

    fieldset .setbuttons input.moveup,
    fieldset .messagebuttons input.moveup {
        background-position: 90% 50%;
    }

    fieldset .setbuttons input.movedown,
    fieldset .messagebuttons input.movedown {
        background-position: 92% 50%;
    }

    .mform .surround,
    .display-program,
    div.nextsetoperator-group-and {
        border: 1px solid @legend-border-color;
        border-radius: @border-radius-large;
        margin-bottom: @padding-large-vertical;
        padding: @padding-small-horizontal * 2;
    }

    div.nextsetoperator-group-and .display-program:last-child {
        margin-bottom: 0;
    }

    .display-program h3 {
        margin-top: 0;
    }

    .display-program table th.coursename,
    .display-program table td.coursename {
        width: 50%;
    }
    .display-program table th.launchcourse,
    .display-program table td.launchcourse {
        width: 15%;
    }

    .mform .surround legend {
        border: none;
        margin-bottom: @padding-small-vertical * -.25;
        padding: 0 @padding-small-horizontal;
        width: auto;
    }

    .totara-item-group {
        background-color: @gray-lighter;
        border: 1px solid @gray-light;
        border-radius: @border-radius-large;
        padding: @padding-small-vertical @padding-small-horizontal;
        margin-right: 5%;
    }

    .totara-item-group .totara-item-group-icon {
        float: right;
    }

    .course_list .alert {
        clear: both;
        width: 90%;
        margin: 0 5% @padding-large-vertical 5%;
    }

    .nextsetoperator {
        padding-bottom: @padding-large-vertical;
    }

    .nextsetoperator-then,
    .nextsetoperator-and,
    .nextsetoperator-or,
    .nextsetoperator .operator-or {
        width: 11em;
        vertical-align: middle;
        background-position: middle right;
    }

    .nextsetoperator-then select,
    .nextsetoperator-and select,
    .nextsetoperator-or select,
    .nextsetoperator .operator-or select {
        margin: @padding-large-vertical 0 0 0;
    }

    #assignment_categories .assignment_category td,
    #assignment_categories .assignment_category th {
        border: inherit;
        padding: @padding-small-vertical;
    }
    #assignment_categories .assignment_category th.col0,
    #assignment_categories .assignment_category th.col1,
    #assignment_categories .assignment_category th.col2,
    #assignment_categories .assignment_category th.col3,
    #assignment_categories .assignment_category td.col0,
    #assignment_categories .assignment_category td.col1,
    #assignment_categories .assignment_category td.col2,
    #assignment_categories .assignment_category td.col3 {
        text-align: left;
        vertical-align: middle;
    }

    .total_user_count {
        float: right;
    }

    #completion-dialog .eventtype,
    #completion-dialog .datepicker-wrapper {
        margin: 0 @padding-small-vertical;
    }

    #timeamount,
    #completion-dialog .completiontimehour {
        margin-left: @padding-small-horizontal;
    }

    #completion-dialog .menutimeperiod,
    #completion-dialog .completiontime,
    #completion-dialog .completiontimeminute {
        margin-right: @padding-small-horizontal;
    }

    #program-exceptions .exceptionactions {
        background-color: inherit;
    }

    #exceptions td.c0,
    #exceptions th.c0 {
        width: 5%;
        text-align: center;
    }

    #extension-dialog select {
        display: inline-block;
    }

    .program-savechanges {
        margin-top: @padding-large-vertical;
    }
}
