//
// This file is part of Totara Learn
//
// Copyright (C) 2018 onwards Totara Learning Solutions LTD
//
// This program is free software; you can redistribute it and/or modify
// it under the terms of the GNU General Public License as published by
// the Free Software Foundation; either version 3 of the License, or
// (at your option) any later version.
//
// This program is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.
//
// You should have received a copy of the GNU General Public License
// along with this program.  If not, see <http://www.gnu.org/licenses/>.
//
// @copyright 2018 onwards Totara Learning Solutions LTD
// @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
// @author    Kevin Hottinger <kevin.hottinger@totaralearning.com>
// @package   theme_roots

// Size
@catalog_details-spacing_large: @totara_style-spacing_large;
@catalog_details-spacing_medium: @totara_style-spacing_medium;
@catalog_details-spacing_small: @totara_style-spacing_small;
@catalog_details-spacing_x_small: @totara_style-spacing_x_small;
// Colours
@catalog_details-color_neutral_1: @totara_style-color_neutral_1;
@catalog_details-color_neutral_5: @totara_style-color_neutral_5;
// Shadows
@catalog_details-shadow_2: @totara_style-shadow_2;
// Break points
@catalog_details-screen_sm_min: @totara_style-screen_sm_min;
@catalog_details-screen_md_min: @totara_style-screen_md_min;

.tw-catalogDetails {
    height: 0;

    &__arrow {
        bottom: -1.5px;
        display: none;
        margin: @catalog_details-spacing_medium auto 0;
        position: relative;

        &::before,
        &::after {
            border: solid transparent;
            bottom: .5px;
            content: "";
            height: 0;
            left: 50%;
            position: absolute;
            width: 0;
        }

        &::before {
            border-bottom-color: @catalog_details-color_neutral_5;
            border-width: 1.7rem;
            margin-left: -1.7rem;
        }

        &::after {
            border-bottom-color: @catalog_details-color_neutral_1;
            border-width: @catalog_details-spacing_medium;
            margin-left: -@catalog_details-spacing_medium;
        }
    }

    &__placement {
        height: 0;
        left: 0;
        padding: 0;
        position: fixed;
        top: 0;
        width: 100vw;
        z-index: 4;
    }

    &__content {
        background: @catalog_details-color_neutral_1;
        border: 1px solid @catalog_details-color_neutral_5;
        box-shadow: @catalog_details-shadow_2;
        display: none;
        height: 100%;
        overflow-x: hidden;
        overflow-y: scroll;
        padding: @catalog_details-spacing_medium;
        position: relative;
    }

    &__title {
        .totara_style-heading_medium;
        margin: @catalog_details-spacing_small 0 @catalog_details-spacing_medium;
    }

    &__close {
        float: right;
        font-size: 2rem;
        margin-bottom: @catalog_details-spacing_x_small;
    }

    &__manageLink {
        display: inline-block;
        margin-bottom: @catalog_details-spacing_medium;
    }

    &__detail {
        display: flex;
        flex-grow: 1;
        flex-wrap: wrap;

        &_body {
            flex-grow: 1;
            width: 100%;
        }
        &_side {
            flex-grow: 1;
            width: 100%;
        }
    }

    &__contentBlock {
        margin-bottom: @catalog_details-spacing_medium;
    }

    &__textarea_group {
        &_item {
            .totara_style-body_x_small;
            color: @catalog_item_narrow-color_neutral_6;
            height: 1.63em;// line height
            margin: 0 0 @catalog_item_narrow-spacing_small;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;

            p {
                display:inline; // Item doesn't support block elements
            }

            &:last-of-type {
                margin: 0 0 @catalog_item_narrow-spacing_medium;
            }
        }
    }

    &__iconRow {
        height: 24px;
        line-height: 24px;
        margin: @catalog_item_wide-spacing_medium 0 @catalog_item_wide-spacing_small;
        overflow: hidden;

        > .flex-icon {
            font-size: 1.3em;
        }

        > .flex-icon,
        &_icon {
            margin-right: @catalog_item_narrow-spacing_small;
            max-height: 25px;
            width: 25px;
        }
    }

    &__empty {
        display: none;
    }
}

.tw-grid__item_active {
    .tw-catalogDetails {
        display: block;
        height: 300px;
        margin-bottom: @catalog_item_narrow-spacing_x_small;
        margin-top: 2rem;

        &__arrow,
        &__content {
            display: block;
        }
        &__placement {
            height: 100vh;
        }
    }
}

@media (min-width: @catalog_details-screen_sm_min) {
    .tw-catalogDetails {
        &__arrow {
            z-index: 4;
        }

        &__placement {
            height: inherit;
            left: 0;
            padding: 0 @catalog_details-spacing_medium;
            position: absolute;
            top: inherit;
            width: 100%;
            z-index: initial;
        }

        &__detail {
            &_body {
                width: 70%;
            }
            &_side {
                flex-shrink: 0;
                max-width: 300px;
                min-width: 220px;
                width: 30%;
            }
        }
    }

    .tw-grid__item_active {
        .tw-catalogDetails {
            &__placement {
                height: inherit;
            }
        }
    }
}

@media (min-width: @catalog_details-screen_md_min) {
    .tw-catalogDetails {
        &__detail {
            &_body {
                padding-right: @catalog_details-spacing_large;
            }
        }
    }
}