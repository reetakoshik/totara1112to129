define([],function(){function a(){return this instanceof a?(this.activeClass="tw-catalogItemStyleToggle__btn_active",void(this.widget="")):new a}a.prototype={events:function(){var a=this;this.widget.addEventListener("click",function(b){if(b.preventDefault(),b.target&&b.target.closest("[data-tw-catalogItemStyleToggle_trigger]")){var c=b.target.closest("[data-tw-catalogItemStyleToggle_trigger]");if(c.classList.contains(a.activeClass))return;a.toggle(c),a.triggerEvent("changed",{})}})},preset:function(){var a=this.widget.querySelector("."+this.activeClass);a&&this.triggerEvent("add",{key:"itemstyle",val:a.getAttribute("data-tw-catalogItemStyleToggle_trigger")})},setParent:function(a){this.widget=a},toggle:function(a){for(var b=this.widget.querySelectorAll("[data-tw-catalogItemStyleToggle_trigger]"),c=0;c<b.length;c++)b[c].classList.toggle(this.activeClass);this.triggerEvent("add",{key:"itemstyle",val:a.getAttribute("data-tw-catalogItemStyleToggle_trigger")})},triggerEvent:function(a,b){var c=new CustomEvent("totara_catalog/item_style_toggle:"+a,{bubbles:!0,detail:b});this.widget.dispatchEvent(c)}};var b=function(b){return new Promise(function(c){var d=new a;d.setParent(b),d.preset(),d.events(),c(d)})};return{init:b}});