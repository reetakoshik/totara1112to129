define([],function(){function a(){return this instanceof a?(this.activeClass="tw-toggleFilterPanel__active",this.fixedClass="tw-toggleFilterPanel__trigger_fixed",this.targetwidget=".tw-selectRegionPanel",this.toggleClass="tw-selectRegionPanel__hiddenOnSmall_show",void(this.widget="")):new a}a.prototype={constructor:a,events:function(){var a=this;this.widget.addEventListener("click",function(b){b.preventDefault(),b.target&&b.target.closest("[data-tw-toggleFilterPanel-trigger]")&&a.toggleWidget()}),this.setPositionFixedEvent=function(){var b=a.widget.querySelector("[data-tw-toggleFilterPanel-trigger]"),c=a.widget.parentNode,d=c.getBoundingClientRect().top,e=a.widget.offsetHeight,f=c.offsetHeight-e;d<0&&d>-f?b.classList.add(a.fixedClass):b.classList.remove(a.fixedClass)};var b=new MutationObserver(function(){if("false"!==a.widget.getAttribute("data-tw-toggleFilterPanel-addLabelContent")){var b=a.widget.getAttribute("data-tw-toggleFilterPanel-addLabelContent");a.widget.querySelector("[data-tw-toggleFilterPanel-extraContent]").innerHTML=b,a.widget.setAttribute("data-tw-toggleFilterPanel-addLabelContent",!1)}});b.observe(this.widget,{attributes:!0,attributeFilter:["data-tw-togglefilterpanel-addlabelcontent"],subtree:!1})},setParent:function(a){this.widget=a},setPositionFixed:function(){var a=this.widget.querySelector("[data-tw-toggleFilterPanel-trigger]");this.widget.classList.contains(this.activeClass)?window.addEventListener("scroll",this.setPositionFixedEvent,!0):(window.removeEventListener("scroll",this.setPositionFixedEvent,!0),a.classList.remove(this.fixedClass))},toggleWidget:function(){this.widget.classList.toggle(this.activeClass),this.setPositionFixed(),this.triggerEvent("changed",{targetwidget:this.targetwidget,toggleClass:this.toggleClass})},triggerEvent:function(a,b){var c=new CustomEvent("totara_catalog/toggle_filter_panel:"+a,{bubbles:!0,detail:b});this.widget.dispatchEvent(c)}};var b=function(b){return new Promise(function(c){var d=new a;d.setParent(b),d.events(),c(d)})};return{init:b}});