define([],function(){function a(){return this instanceof a?void(this.widget=""):new a}a.prototype={bubbledEventsListener:function(){var a="totara_core/select_tree",b=this;this.widget.addEventListener(a+":add",function(a){b.triggerEvent("add",a.detail)}),this.widget.addEventListener(a+":changed",function(){b.triggerEvent("changed",{})}),this.widget.addEventListener(a+":remove",function(a){b.triggerEvent("remove",a.detail)})},setParent:function(a){this.widget=a},triggerEvent:function(a,b){var c=new CustomEvent("totara_catalog/results_sort:"+a,{bubbles:!0,detail:b});this.widget.dispatchEvent(c)}};var b=function(b){return new Promise(function(c){var d=new a;d.setParent(b),d.bubbledEventsListener(),c(d)})};return{init:b}});