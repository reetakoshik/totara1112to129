define(["jquery","totara_form/form"],function(a,b){function c(a,d,e,f){return this instanceof c?(b.Element.apply(this,arguments),void(this.input=null)):new c(a,d,e,f)}return c.prototype=Object.create(b.Element.prototype),c.prototype.constructor=c,c.prototype.toString=function(){return"[object TextElement]"},c.prototype.init=function(b){var c=this.id,d=[];if(this.input=a("#"+c),this.input.change(a.proxy(this.changed,this)),this.input.attr("required")){var e=a.Deferred();d.push(e),require(["totara_form/modernizr"],function(a){a.input.required?e.resolve():require(["totara_form/polyfill_required-lazy"],function(a){a.init(c),e.resolve()})})}if(this.input.attr("placeholder")){var f=a.Deferred();d.push(f),require(["totara_form/modernizr"],function(a){a.input.placeholder?f.resolve():require(["totara_form/polyfill_placeholder-lazy"],function(a){a.init(c),f.resolve()})})}a.when.apply(a,d).done(b)},c.prototype.getValue=function(){return this.input.val()},c.prototype.isEmpty=function(){var a=this.getValue();return""===a.toString().trim()||!!a.hasOwnProperty("isEmpty")&&a.isEmpty()},c.prototype.compare=function(a){var c,d=this.getValue();switch(a){case b.Operators.Equals:return 2!==arguments.length?(b.debug("Compare Equals expects 2 arguments, "+arguments.length+" given.",this,b.LOGLEVEL.warn),null):(c=arguments[1],!Array.isArray(c)&&d.toString().trim()===c.toString().trim());case b.Operators.Empty:return this.isEmpty();case b.Operators.Filled:return d=d.toString().trim(),""!==d&&"false"!==d.toLowerCase()&&!/^[0]*$/.test(d);case b.Operators.NotEquals:return 2!==arguments.length?(b.debug("Compare NotEquals expects 2 arguments, "+arguments.length+" given.",this,b.LOGLEVEL.warn),null):(c=arguments[1],!this.compare(b.Operators.Equals,c));case b.Operators.NotEmpty:return!this.isEmpty();case b.Operators.NotFilled:return!this.compare(b.Operators.Filled);default:b.debug('Element does not implement all comparisons: "'+a+'", asking the Form',this,b.LOGLEVEL.warn);var e=[d].concat(arguments);return b.Element.prototype.compare.apply(this,e)}},c});