define(["jquery","totara_form/form","core/templates"],function(a,b){function c(a,d,e){return this instanceof c?(b.Group.apply(this,arguments),void(this.node=e)):new c(a,d,e)}return c.prototype=Object.create(b.Group.prototype),c.constructor=c,c.prototype.toString=function(){return"[object Wizard]"},c.prototype.init=function(b){var c,d=this.getForm(),e=a(this.node),f=e.attr("data-element-id"),g=a("#"+f).attr("data-element-name"),h='[name="'+g+'__changestage"]',i=a(h),j=this,k=a("#"+f+" .tf_wizard_progress"),l="cancelled";a(d.node).on("click",'[name="changestage"]',function(b){b.preventDefault(),c=a(this).data("jump-to-stage"),j.changeStage(d,i,c)}),a(d.node).on("click",'[name="submitbutton"]',function(a){a.preventDefault(),d.submit()}),a(d.node).on("click",'[name="cancelbutton"]',function(a){a.preventDefault(),i.val(l),d.submit()}),k.on("click",".tf_wizard_progress_bar_item",function(b){b.preventDefault(),a(this).hasClass("tf_wizard_progress_bar_item_jumpable")&&(c=a(this).data("jump-to-stage"),j.changeStage(d,i,c))}),b()},c.prototype.changeStage=function(a,b,c){b.val(c),a.reload()},c});