define(["jquery","core/templates","core/config","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f){var g=function(c,g,h){var i=c,j=g,k=a(a('input[name="'+j+'"]')[0]),l=[];l.push({key:"ok",component:"moodle"}),l.push({key:"cancel",component:"moodle"}),l.push({key:"icon_choose_title",component:"block_totara_featured_links"}),l.push({key:"icon_choose",component:"block_totara_featured_links"}),l.push({key:"icon_change",component:"block_totara_featured_links"});var m=d.get_strings(l),n=b.render("block_totara_featured_links/icon_picker_icons",{icons:h});a.when(m,n).done(function(c,d){var g={ok:c[0],cancel:c[1],title:c[2],choose:c[3],change:c[4]};a("#"+i+"_delete").on("click",function(){a(this).hide(),a("#"+i+"_icon").html(""),a('input[name="'+j+'"]').val(""),a("#show-iconPicker-dialog").html(g.choose)}),e.create({type:"CONFIRM",title:g.title,body:d[0]},a("#show-iconPicker-dialog"),{yesstr:g.ok,nostr:g.cancel}).done(function(c){var d=c.getRoot();d.find(".icon-picker-icons .icon-picker-item").on("click",function(){a(".icon-picker-item.selected").removeClass("selected"),a(this).addClass("selected"),a("#icon-picker-selected-icon").html(a(this).attr("data-flex-icon-identifier"))}),d.on(f.shown,function(b){a(".icon-picker-item.selected").removeClass("selected");var c=a('input[name="'+j+'"]').val();a('[data-flex-icon-identifier="'+c+'"]').addClass("selected")}),d.on(f.yes,function(d){var e=a(".selected").attr("data-flex-icon-identifier");e&&(k.val(e),b.renderIcon(e).done(function(b){a("#"+i+"_icon").html(b);var c=a("#"+i+"_delete");c.removeClass("hidden"),c.show(),a("#show-iconPicker-dialog").html(g.change)}),c.hide())})})})};return{init:g}});